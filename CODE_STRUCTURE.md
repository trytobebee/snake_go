# 代码结构说明

## 文件组织

项目已重构为模块化结构，代码按功能分离到不同文件：

### 📁 核心文件

- **`main.go`** - 程序入口和主游戏循环
  - 键盘输入处理
  - 游戏主循环
  - 加速检测逻辑

- **`types.go`** - 数据类型定义
  - `Point` - 坐标点
  - `FoodType` - 豆子类型枚举
  - `Food` - 豆子结构体
  - `Game` - 游戏主结构体

- **`constants.go`** - 常量配置
  - 游戏尺寸（宽度、高度）
  - 豆子生成参数（生成间隔、最大数量）
  - 加速相关参数（速度倍率、检测阈值）

- **`food.go`** - 豆子相关逻辑
  - `getScore()` - 获取豆子分值
  - `getDuration()` - 获取豆子留存时间
  - `isExpired()` - 检查是否过期
  - `getEmoji()` - 获取豆子图标
  - `getEmojiWithTimer()` - 获取带倒计时的图标

- **`game.go`** - 游戏核心逻辑
  - `NewGame()` - 创建新游戏
  - `spawnOneFood()` - 生成豆子
  - `removeExpiredFoods()` - 清理过期豆子
  - `trySpawnFood()` - 尝试生成豆子
  - `update()` - 更新游戏状态（移动、碰撞检测、吃豆子）

- **`render.go`** - 渲染显示
  - `clearScreen()` - 清屏
  - `render()` - 渲染游戏画面
  - `renderWithBoost()` - 渲染带加速指示的画面

## 🎮 游戏特性

### 多样化豆子系统
- 🔴 红色（40分，10秒）- 15%概率
- 🟠 橙色（30分，15秒）- 20%概率
- 🔵 蓝色（20分，18秒）- 25%概率
- 🟣 紫色（10分，20秒）- 35%概率

### 倒计时提示
豆子消失前5秒会显示上标倒计时（🔴⁵ → 🔴¹）

### 加速机制
连续按住当前方向键可触发3倍速度加速 🚀

### 实时统计
- 当前分数
- 吃豆速度（个/秒）
- 已吃豆子总数

## 🔧 编译运行

```bash
# 编译
go build -o snake

# 运行
./snake
```

## 📊 代码统计

| 文件 | 主要功能 | 代码行数 |
|------|---------|---------|
| constants.go | 配置常量 | ~20 |
| types.go | 数据结构 | ~45 |
| food.go | 豆子逻辑 | ~90 |
| game.go | 核心逻辑 | ~180 |
| render.go | 渲染显示 | ~240 |
| main.go | 主循环 | ~210 |

总计：约 785 行代码（较原先单文件更易维护）
